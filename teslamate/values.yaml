# This is to override the chart name.
nameOverride: ""
fullnameOverride: ""

# secret values
secretkey: "REPLACE_WITH_A_SECURE_KEY"
database_user: "teslamate"
database_pass: "REPLACE_WITH_A_SECURE_PASSWORD"
database_name: "teslamate"

image:
  repository: teslamate/teslamate
  tag: latest
  pullPolicy: IfNotPresent

imagePullSecrets: []

podAnnotations: {}
podLabels: {}
podSecurityContext: {}
  # fsGroup: 2000

securityContext: {}
  # capabilities:
  #   drop:
  #   - ALL
  # readOnlyRootFilesystem: true
  # runAsNonRoot: true
  # runAsUser: 1000

resources: {}
nodeSelector: {}
tolerations: []
affinity: {}

postgres:
  image:
    repository: postgres
    tag: 17
    pullPolicy: IfNotPresent
  podAnnotations: {}
  podLabels: {}
  podSecurityContext:
    fsGroup: 999  # default postgres UID (not alpine)
    fsGroupChangePolicy: "OnRootMismatch"
  securityContext: {}
  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}
  persistence:
    enabled: false
    persistentVolumeClaim:
      claimName: ""

grafana:
  image:
    repository: teslamate/grafana
    tag: latest
    pullPolicy: Always
  podAnnotations: {}
  podLabels: {}
  podSecurityContext:
    fsGroup: 472  # default GF_UID
    fsGroupChangePolicy: "OnRootMismatch"
  securityContext: {}
  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}
  persistence:
    enabled: false
    persistentVolumeClaim:
      claimName: ""

mosquitto:
  image:
    repository: eclipse-mosquitto
    tag: 2
    pullPolicy: IfNotPresent
  podAnnotations: {}
  podLabels: {}
  podSecurityContext: {}
  securityContext: {}
  resources: {}
  nodeSelector: {}
  tolerations: []
  affinity: {}
  persistence:
    enabled: false
    persistentVolumeClaim:
      claimName: ""

services:
  teslamate:
    type: ClusterIP
    port: 4000
  grafana:
    type: ClusterIP
    port: 3000

backup:
  # Enable database backup to Google Drive
  enabled: false
  # Cron schedule for backup (default: daily at 2 AM)
  schedule: "0 2 * * *"
  # Image used for backup job
  image:
    repository: python
    tag: 3.12-slim
    pullPolicy: IfNotPresent
  # Google Drive configuration
  googleDrive:
    # Google Drive folder ID where backups will be uploaded
    # You can get this from the folder URL: https://drive.google.com/drive/folders/FOLDER_ID
    folderId: ""
    # Name of the Kubernetes secret containing Google Drive OAuth2 credentials
    # The secret should contain a key 'token.json' with OAuth2 user credentials
    # See README for instructions on how to generate the token.json file
    credentialsSecretName: "teslamate-gdrive-credentials"
  # Resource limits for backup job
  resources: {}
    # limits:
    #   cpu: 100m
    #   memory: 128Mi
    # requests:
    #   cpu: 100m
    #   memory: 128Mi
  nodeSelector: {}
  tolerations: []
  affinity: {}
